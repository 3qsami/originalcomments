<html>
<head>
<title></title>
<link type="text/css" rel="Stylesheet" href="../../style/main.css" />
<link type="text/css" rel="Stylesheet" href="../../style/content.css" />
<link type="text/css" rel="Stylesheet" href="../../style/ui-lightness/jquery-ui.css" />
<style type="text/css">
	.option-slider
	{
		display:inline-block;width:200px;margin-left:20px;
	}
	
	.level1
	{
		padding-left:20px;
	}
	.level2
	{
		padding-left:50px;
	}
</style>

<script type="text/javascript" src="../../lib/jquery.min.js"></script>

<script type="text/javascript">
	//jq
	var jQuery = createJQuery(window);
</script>

<script type="text/javascript" src="../../lib/jquery-ui.min.js"></script>

<script type="text/javascript" src="../../js/cbase.js"></script>
<script type="text/javascript" src="../../js/ctools.js"></script>
<script type="text/javascript" src="../../js/cpage.js"></script>
<script type="text/javascript" src="js/ccommon.js"></script>


<script type="text/javascript">
	
	//
	(function () {
		//url
		var oParts = ctools.splitURL(document.URL);

		//cbase
		var sBaseSrc = String2.format("../../{0}/js/cbase.js", oParts["platform"]);
		ctools.loadScriptSrc(document, sBaseSrc, function () {
			//ok
			jQuery(document).ready(function () {
				//title
				document.title = cbase.getlanguagevalue("builder_studio_title");

				//tabs name
				jQuery("#tabaction-myparsers").text(cbase.getlanguagevalue("builder_studio_myparsers"));
				jQuery("#tabaction-samples").text(cbase.getlanguagevalue("builder_studio_samples"));
				jQuery("#tabaction-wantedparsers").text(cbase.getlanguagevalue("builder_studio_wantedparsers"));
				jQuery("#tabaction-top").text(cbase.getlanguagevalue("builder_studio_top"));

				//tabs
				var nSelectedIndex = 0;
				jQuery("#tabs").tabs({ selected: nSelectedIndex, show: ontabsshow });

				//
				jQuery("#id_developerdocumentation").text(cbase.getlanguagevalue("builder_studio_document"));
				jQuery("#id_advicerating").text(cbase.getlanguagevalue("advicerating"));

				//ok
				jQuery(document.body).css('visibility', 'visible');
			});
		});
	})();

	
	//
	function ontabsshow(event,ui){
		var index = ui.index;
		var panel = ui.panel;
		//panel maybe jquery object or dom element
		panel = jQuery(panel);

		if (index == 0) {
			ontabsshow_myparsers(panel);
		}
	}

	function ontabsshow_myparsers(panel) {
		//only once
		//2011.08.13 总是重新获取
//		if (panel.attr("_inited") === "true")
//			return;
//		else
//			panel.attr("_inited", "true");

		//
		_fillformlist();
	}

	//
	function _fillformlist(oForms) {
		if (oForms == null)
			oForms = _getOptionsForms();

		//order by ModifiedTime desc
		var oArray = new Array();
		for (var sFormId in oForms) {
			oArray.push(sFormId);
		}
		//desc
		oArray.sort(function (x, y) {
			var a = new Date(oForms[x]["ModifiedTime"]);
			var b = new Date(oForms[y]["ModifiedTime"]);
			return a == b ? 0 : (a > b ? -1 : 1);
		});

		//subscriptions
		var sHtml = "";

		//loop
		for (var i = 0; i < oArray.length; i++) {
			var sFormId = oArray[i];
			var oFollowInfo = oForms[sFormId];

			var s = String2.format("<h4 _formId='{0}' id='accordion-subscriptions-{0}'><div style='max-width:600px;display:block;overflow:hidden;white-space:nowrap;'>\
											<a href='#' onclick='return onclick_edit(event,\"{0}\");' title='{1}' style='margin-right:4px;'><img border='0' src='{2}' /></a>\
											<a href='#' onclick='return onclick_clone(event,\"{0}\");' title='{3}' style='margin-right:4px;'><img border='0' src='{4}' /></a>\
											<a href='#' onclick='return onclick_delete(event,\"{0}\");' title='{5}' style='margin-right:4px;'><img border='0' src='{6}' /></a>\
											<span>{7}</span>\
											</div></h4>",
											sFormId,
											'Edit',
											cbase.getURL("addons/images/edit.gif"),
											'Clone',
											cbase.getURL("addons/images/copy.ico"),
											'Delete',
											cbase.getURL("addons/images/itemdelete.ico"),
											oFollowInfo["ItemTitle"]
											);

			sHtml += s;
		}

		//force destroy old node
		jQuery("#formlist").remove();

		//formlist
		if (sHtml != "") {
			//create
			var oDivFormList = document.createElement("div");
			oDivFormList.id = "formlist";
			jQuery("#tabs-myparsers").append(oDivFormList);

			//content
			jQuery(oDivFormList).html(sHtml);
		}
	}

</script>
</head>
<body style="visibility:hidden;">

<div style="float:right; width:400px; " class="demo-config-menu">
	<div class="demos-nav">
		<ul>
			<li><a href="http://www.pimshell.com/formgallery/development/" id="id_developerdocumentation"></a></li>
			<li><a href="https://chrome.google.com/webstore/detail/bakgcnaldcjegdemmmkkmghcbmliojjd" id="id_advicerating"></a></li>
		</ul>
	</div>
</div>

<div id="tabs" style="clear:both;">
	<ul>
		<li><a id="tabaction-myparsers" href="#tabs-myparsers"></a></li>
		<li><a id="tabaction-samples" href="#tabs-samples"></a></li>
		<li><a id="tabaction-wantedparsers" href="#tabs-wantedparsers"></a></li>
		<li><a id="tabaction-top" href="#tabs-top"></a></li>
	</ul>
	<div id="tabs-myparsers">
	</div>
	<div id="tabs-samples">
		<iframe src="http://www.pimshell.com/formgallery/FormSamples.aspx" frameborder="0" width="100%" height="500px" ></iframe>
	</div>
	<div id="tabs-wantedparsers">
		<iframe src="http://www.pimshell.com/formgallery/FormWantedList.aspx" frameborder="0" width="100%" height="500px" ></iframe>
	</div>
	<div id="tabs-top">
		<iframe src="http://www.pimshell.com/formgallery/FormTopList.aspx" frameborder="0" width="100%" height="500px" ></iframe>
	</div>
</div>

</body>
</html>
